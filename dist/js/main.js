function generateNestedNavigation(){const u=document.querySelectorAll("section h2, section h3, section h4, section h5, section h6"),d=document.createElement("nav");d.classList.add("manual-navigation");let c=document.createElement("ul");d.appendChild(c);let i=[0,0,0,0,0],s=2;const h=new Map;u.forEach(n=>{const e=parseInt(n.tagName.substring(1));i[e-2]++;for(let t=e-1;t<i.length;t++)i[t]=0;const l=document.createElement("li"),o=document.createElement("a"),r=n.textContent.replace(/\s+/g,"_").toLowerCase();if(n.id=r,o.href=`#${r}`,o.textContent=i.slice(0,e-1).join(".")+". "+n.textContent,o.classList.add("nav-link"),h.set(r,o),o.addEventListener("click",function(t){t.preventDefault(),document.getElementById(r).scrollIntoView({behavior:"smooth",block:"start"})}),l.appendChild(o),e>s){const t=document.createElement("ul");c.lastChild.appendChild(t),c=t}else if(e<s)for(let t=e;t<s;t++)c=c.parentNode.parentNode;c.appendChild(l),s=e}),document.querySelectorAll("section h1").forEach(n=>{n.insertAdjacentElement("afterend",d)});let a=null;const m=new IntersectionObserver(n=>{let e=null;if(n.forEach(l=>{l.isIntersecting&&(!e||l.boundingClientRect.top<e.boundingClientRect.top)&&(e=l)}),e){const l=e.target.id,o=h.get(l);a&&a!==o&&a.classList.remove("active"),o.classList.add("active"),a=o}},{threshold:.5,rootMargin:"0px 0px -50% 0px"});u.forEach(n=>{m.observe(n)})}
